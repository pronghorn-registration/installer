# ==============================================================================
# CORE APPLICATION CONFIGURATION
# ==============================================================================

APP_NAME=Pronghorn
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_TIMEZONE=UTC
APP_URL=https://pronghorn.test

# Instance identifier - must match an instance code in the database
# This tells the application which library system configuration to use
INSTANCE_ID=default

# ==============================================================================
# CMS CONFIGURATION
# ==============================================================================

# Domain for serving CMS pages (leave empty to use /cms/* path on main domain)
CMS_DOMAIN=

# Enable CMS functionality
CMS_ENABLED=true

# Site name displayed in CMS header
CMS_SITE_NAME="Pronghorn Card"

# ==============================================================================
# REGISTRATION CONFIGURATION
# ==============================================================================

# Minimum age requirement for library card registration
REGISTRATION_MINIMUM_AGE=18

# Temporary postal code validation (will be replaced with database configuration)
POSTAL_CODE_ERROR_MESSAGE="Sorry, you must have an Alberta address to register."

# ==============================================================================
# INTEGRATED LIBRARY SYSTEM (ILS) CONFIGURATION
# ==============================================================================

# ILS Driver - currently only 'symphony' is supported
ILS_DRIVER=symphony

# ILS API Connection (Required)
ILS_API_BASE_URL=https://ils-api.example.com
ILS_API_USERNAME=ils_username
ILS_API_PASSWORD=ils_password
ILS_API_APP_ID=PronghornRegistration
ILS_API_CLIENT_ID=pronghorn_client
ILS_API_TIMEOUT=30

# Symphony-specific: User privilege override code (required for patron creation)
ILS_USER_PRIVILEGE_OVERRIDE=

# ILS Category 09 Identifiers for patron classification
ILS_TEST_IDENTIFIER=PRONGTEST
ILS_PRODUCTION_IDENTIFIER=PRONGHORN
ILS_DUPLICATE_IDENTIFIER=PRONGDUP
ILS_TEST_DUPLICATE_IDENTIFIER=PRONGDTEST

# Testing Configuration
# Enable live API read tests (search, get, login) - requires VPN and valid credentials
# These are READ-ONLY tests that are safe but require access to live ILS API
RUN_LIVE_ILS_READ_TESTS=false

# Enable live API tests that write to the ILS (create/update patrons)
# WARNING: These tests CREATE and MODIFY actual patron records in your ILS system
# Only enable when intentionally testing against a live ILS API
RUN_LIVE_ILS_WRITE_TESTS=false

# Used to get the location of registering patrons based on their address
GOOGLE_MAPS_API_KEY=

# ==============================================================================
# PASSWORD/PIN GENERATION CONFIGURATION
# ==============================================================================

# Configure how patron passwords/PINs are generated
# PASSWORD_LENGTH=8
# PASSWORD_NUMERIC_ONLY=false
# PASSWORD_UNAMBIGUOUS_ONLY=true
# PASSWORD_CLUSTER_GROUPS=true

# ==============================================================================
# DATABASE, CACHE, QUEUE, AND SESSION
# ==============================================================================

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
APP_MAINTENANCE_STORE=database

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=sqlite
# DB_HOST=127.0.0.1
# DB_PORT=3306
# DB_DATABASE=laravel
# DB_USERNAME=root
# DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local

# Queue Configuration
# Use 'redis' for production (requires Redis), 'database' for development, or 'sync' for immediate execution
QUEUE_CONNECTION=database

# Cache Configuration
# Use 'redis' for production (requires Redis) or 'database' for development
CACHE_STORE=database
CACHE_PREFIX=

MEMCACHED_HOST=127.0.0.1

# Redis Configuration (when using Docker or Redis is installed)
# Local development: REDIS_HOST=127.0.0.1
# Docker: REDIS_HOST=redis (uses service from docker-compose.yml)
REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# ==============================================================================
# MAIL CONFIGURATION
# ==============================================================================

MAIL_MAILER=log
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# Mail Notification Settings
MAIL_ENABLED=true
MAIL_QUEUE=emails
MAIL_SEND_WELCOME=true
MAIL_SEND_LINK_SUCCESS=true
MAIL_INCLUDE_PIN=false

# Admin Notifications
ADMIN_EMAIL=admin@library.ca
MAIL_NOTIFY_CRITICAL_ERRORS=true
MAIL_ERROR_RATE_LIMIT=60
MAIL_NOTIFY_ON_REGISTRATION=false

# ==============================================================================
# SAML AUTHENTICATION CONFIGURATION
# ==============================================================================

# SAML Service Provider Metadata
# These values appear in the SAML metadata XML shared with Alberta.ca IAM
TECHNICAL_CONTACT_EMAIL=admin@example.com

# Optional overrides (uncomment if needed):
# ORGANIZATION_NAME="${APP_NAME}"
# ORGANIZATION_URL="${APP_URL}"
# TECHNICAL_CONTACT_NAME="Your Name"

# SAML Base URL (where SAML routes are mounted)
SAML_BASE_URL=

# Service Provider (SP) - Your Application
SAML_SP_ENTITYID=
SAML_SP_ACS_URL=
SAML_SP_SLS_URL=
SAML_SP_X509='storage/certs/saml.crt'
SAML_SP_PRIVATEKEY='storage/certs/saml.key'

# Identity Provider (IdP) - Alberta.ca IAM
SAML_IDP_ENTITYID=
SAML_IDP_SSO_URL=
SAML_IDP_SLS_URL=
SAML_IDP_X509=

# ==============================================================================
# AWS CONFIGURATION (for S3, SES, etc.)
# ==============================================================================

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ==============================================================================
# VITE BUILD CONFIGURATION
# ==============================================================================

VITE_APP_NAME="${APP_NAME}"

# ==============================================================================
# DATABASE FALLBACK CONFIGURATION (Optional)
# ==============================================================================
# The values below are used as fallbacks when database configuration is not set.
# It's recommended to configure these via the admin panel (/admin) instead.
#
# Configuration hierarchy (highest priority first):
# 1. Database (instances/libraries/branches tables) - Recommended
# 2. Environment variables (below) - Fallback for initial setup
# 3. Config defaults (config/pronghorn.php) - Final fallback
#
# These are useful for:
# - Initial deployment before database is populated
# - Testing without database
# - Backward compatibility with older deployments
#
# ==============================================================================
# MIGRATION NOTES
# ==============================================================================
# The following values have been REMOVED from config and are now database-only:
#
# - LIBRARY_NAME → Configure via: Admin Panel → Instances → Name field
# - LIBRARY_NAME_SHORT → Configure via: Admin Panel → Instances → Short Name field
# - LOGO_FILE → Configure via: Admin Panel → Instances/Libraries → Logo File field
# - LOGO_CARD_FILE → Configure via: Admin Panel → Instances/Libraries → Card Logo File field
# - WELCOME_MESSAGE → Configure via: Admin Panel → Instances → Welcome Message field
#
# Contact information (phone, email, hours, addresses) is also database-only:
# - Configure via: Admin Panel → Libraries/Instances → Contact Information
# - Configure via: Admin Panel → Libraries/Instances → Addresses
# - Configure via: Admin Panel → Libraries/Instances → Regular Hours
#
# If these values are not configured in the database, they simply won't display
# on the public site. No fallback values are provided via environment variables.
# ==============================================================================

# Library Card Number Generation (fallback only)
# Configure via: Admin Panel → Instances/Libraries → Library Card Settings
# LIBRARY_CARD_MIN=25021090000000
# LIBRARY_CARD_MAX=25021099999999
# LIBRARY_CARD_STRATEGY=sequential
# LIBRARY_CARD_CHECK_DIGIT_SCHEME=none

# ILS Patron Creation Defaults (fallback only)
# Configure via: Admin Panel → Libraries → ILS Configuration
# ILS_DEFAULT_LIBRARY=SGMED
# ILS_DEFAULT_PROFILE=SGMEDA
# ILS_DEFAULT_MUNICIPALITY=MEDICINEHA


# ==============================================================================
# MAIL PROVIDER EXAMPLES (Commented - choose one)
# ==============================================================================

# Gmail SMTP
# MAIL_MAILER=smtp
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USERNAME=yourlibrary@gmail.com
# MAIL_PASSWORD=your-app-specific-password
# MAIL_ENCRYPTION=tls

# Office365/Outlook SMTP
# MAIL_MAILER=smtp
# MAIL_HOST=smtp.office365.com
# MAIL_PORT=587
# MAIL_USERNAME=library@yourdomain.com
# MAIL_PASSWORD=your-password
# MAIL_ENCRYPTION=tls

# Mailgun (requires: composer require symfony/mailgun-mailer symfony/http-client)
# MAIL_MAILER=mailgun
# MAILGUN_DOMAIN=mg.yourlibrary.ca
# MAILGUN_SECRET=key-xxxxxxxxxxxxxxxxxxxxxxxxxx

# Postmark (requires: composer require symfony/postmark-mailer symfony/http-client)
# MAIL_MAILER=postmark
# POSTMARK_TOKEN=your-postmark-server-token

# Amazon SES (requires: composer require aws/aws-sdk-php)
# MAIL_MAILER=ses
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_DEFAULT_REGION=us-east-1
